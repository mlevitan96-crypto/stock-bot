[
  {
    "timestamp": "2026-02-13T01:42:53.505199+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:54.519594+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:54.519890+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:54.520108+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLK",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:42:54.520691+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLK",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:42:54.520883+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "XLK",
      "attempts": 3
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:42:54.521113+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.11)+flow_reversal+stale_alpha_cutoff(328min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:42:54.537547+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:55.052339+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:56.074128+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:56.074418+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:56.074700+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:42:56.075447+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:42:58.090303+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:58.606025+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:59.620577+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:59.620855+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:42:59.621321+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:42:59.622009+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:43:03.635645+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:04.151051+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:05.166319+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:05.166565+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:05.166838+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:43:05.168087+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:43:05.168682+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "attempts": 3
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:43:05.168871+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.11)+stale_alpha_cutoff(319min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:05.184518+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:05.699081+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:06.713871+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:06.714108+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:06.714370+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:06.715278+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:08.740448+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:09.255160+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:10.274897+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:10.275127+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:10.276542+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:10.278667+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:14.294385+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:14.810752+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:14.825102+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-13T01:43:15.789703+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 2280
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.829470+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.829920+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.830213+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:15.832546+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:15.832837+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempts": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:43:15.833001+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.21)+flow_reversal+stale_alpha_cutoff(318min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:15.853130+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.910252+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.911344+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.912167+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-13T01:43:15.912072+00:00",
      "cycle_id": 2280,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 35,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 204,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.912480+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-13T01:43:15.913339+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 2280,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:43:16.369116+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:17.384153+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:17.384437+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:17.384665+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:17.386012+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:19.400421+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:19.914502+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:20.930642+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:20.930881+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:20.931111+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:20.931663+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:24.945921+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:25.461345+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:26.483645+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:26.483832+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:26.484131+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:26.485626+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:26.485825+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "attempts": 3
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:43:26.485940+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.04)+flow_reversal+stale_alpha_cutoff(316min,-0.03%)",
      "regime": "mixed"
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:26.505880+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:27.022227+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:28.038893+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:28.039052+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:28.039199+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XOM",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:28.040723+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XOM",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:30.059350+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:30.579351+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:31.595746+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:31.596011+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:31.596348+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XOM",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:31.597299+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XOM",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:35.612043+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:36.126841+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:37.142777+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:37.143071+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:37.143488+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XOM",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:37.144724+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XOM",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:37.145038+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "XOM",
      "attempts": 3
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:43:37.145200+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.09)+stale_alpha_cutoff(300min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:37.165935+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:37.680495+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:38.694464+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:38.694685+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 9, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:38.694946+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SLB",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:38.695992+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SLB",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:40.712809+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:41.227569+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:42.243087+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:42.243325+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 9, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:42.243520+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SLB",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:42.244651+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SLB",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:46.259300+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:46.774294+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:47.789705+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 9, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 9, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:47.789938+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 9, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:47.790189+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SLB",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:47.791164+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SLB",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:47.791764+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "SLB",
      "attempts": 3
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:43:47.792328+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.19)+stale_alpha_cutoff(299min,0.01%)",
      "regime": "mixed"
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:47.810565+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:48.325868+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:49.341762+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:49.342023+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 60, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:49.342292+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "LCID",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:49.343568+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "LCID",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:51.359071+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:51.875222+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:52.889807+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:52.890047+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 60, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:52.890260+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "LCID",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:52.890486+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "LCID",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:56.905406+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:57.420387+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:58.435147+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 60, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 60, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:58.435368+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 60, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:58.435554+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "LCID",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:58.436442+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "LCID",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:58.436620+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "LCID",
      "attempts": 3
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:43:58.436732+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.05)+flow_reversal+stale_alpha_cutoff(298min,-0.01%)",
      "regime": "mixed"
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:43:58.452286+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:58.967664+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:59.996234+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:59.996552+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:43:59.996824+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLI",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:43:59.997799+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XLI",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:44:02.012852+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:02.527632+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:03.542021+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:03.542286+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:03.542525+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLI",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:44:03.543397+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XLI",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:44:07.558729+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:08.077194+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:09.097808+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:09.098023+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:09.098311+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLI",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:44:09.099446+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLI",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:44:09.099915+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "XLI",
      "attempts": 3
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:44:09.100224+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.05)+flow_reversal+drawdown(8.6%)+stale_alpha_cutoff(297min,0.09%)",
      "regime": "mixed"
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:09.116071+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:09.631932+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:10.646673+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:10.646939+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:10.647152+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "WFC",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:10.647511+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "WFC",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:12.663119+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:13.184469+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:14.199132+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:14.199377+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:14.199675+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "WFC",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:14.199922+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "WFC",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:15.318116+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-13T01:44:15.790731+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 2281
    }
  },
  {
    "timestamp": "2026-02-13T01:44:15.891851+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-13T01:44:15.892191+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:44:15.893564+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-13T01:44:15.893443+00:00",
      "cycle_id": 2281,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 35,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 204,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-13T01:44:15.893838+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-13T01:44:15.894364+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 2281,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:44:18.213505+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:18.727912+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:19.742463+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:19.742682+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:19.742939+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "WFC",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:19.743546+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "WFC",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:19.743981+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "WFC",
      "attempts": 3
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:44:19.744295+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.05)+drawdown(6.6%)+stale_alpha_cutoff(292min,-0.06%)",
      "regime": "mixed"
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:19.759333+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:20.273474+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:21.292000+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:21.292232+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:21.292443+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "C",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:21.293313+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "C",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:23.309159+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:23.823991+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:24.839524+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:24.839758+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:24.839952+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "C",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:24.840350+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "C",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:28.853780+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:29.367653+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:30.384565+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:30.385145+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:30.386123+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "C",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:30.386453+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "C",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:30.386747+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "C",
      "attempts": 3
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:44:30.386872+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.09)+flow_reversal+stale_alpha_cutoff(292min,0.01%)",
      "regime": "mixed"
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:30.410334+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:30.924229+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:31.940035+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:31.940216+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:31.941509+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PFE",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:31.943530+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "PFE",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:33.957903+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:34.472629+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:35.487887+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:35.488110+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:35.488321+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PFE",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:35.489156+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "PFE",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:39.505907+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:40.022405+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:41.039751+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:41.039917+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:41.040070+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PFE",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:41.043481+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PFE",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:41.044194+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "PFE",
      "attempts": 3
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:44:41.045919+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.19)+stale_alpha_cutoff(283min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:41.067365+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:41.582215+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:42.610081+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:42.610284+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:42.610443+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:42.611045+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:44.625421+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:45.143908+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:46.158466+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:46.158623+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:46.158821+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:46.159195+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:50.173745+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:50.688444+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:51.702579+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:51.702787+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:44:51.702986+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:51.703178+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:44:51.703415+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempts": 3
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:45:15.798743+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 2282
    }
  },
  {
    "timestamp": "2026-02-13T01:45:16.186916+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-13T01:45:16.194420+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:45:16.197975+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-13T01:45:16.196056+00:00",
      "cycle_id": 2282,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 35,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 204,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-13T01:45:16.200667+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-13T01:45:16.202104+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 2282,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:45:16.273793+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-13T01:45:51.815446+00:00",
    "subsystem": "alpaca_api",
    "event_type": "connection_test_success",
    "severity": "INFO",
    "details": {
      "buying_power": 182354.52,
      "equity": 50005.92
    }
  },
  {
    "timestamp": "2026-02-13T01:45:51.836499+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "GM",
      "entry_score": 0.0
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:51.836788+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "GOOGL",
      "entry_score": 3.564
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:45:51.837113+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "NIO",
      "entry_score": 3.6503999999999994
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:45:51.837369+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "BA",
      "entry_score": 3.8178
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:45:51.837571+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "XLK",
      "entry_score": 3.7962000000000002
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:45:51.837766+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "entry_score": 3.411
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:45:51.837952+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "entry_score": 0.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:45:51.838148+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "entry_score": 4.2336
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:45:51.838367+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "XOM",
      "entry_score": 3.5298
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:45:51.838536+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "SLB",
      "entry_score": 3.989
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:45:51.838716+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "LCID",
      "entry_score": 4.891
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:45:51.838912+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "XLI",
      "entry_score": 3.4429999999999996
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:45:51.839111+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "WFC",
      "entry_score": 3.29
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:45:51.839355+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "C",
      "entry_score": 3.532
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:45:51.839572+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "PFE",
      "entry_score": 3.5229999999999997
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:45:51.839749+00:00",
    "subsystem": "reload",
    "event_type": "position_added_from_metadata",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "entry_score": 4.662
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:45:51.970102+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.616,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:51.969974Z"
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:45:51.970254+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.616,
      "prev_signal_strength": 0.616,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:51.969974Z",
      "event_schema_version": 1
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:45:51.994462+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.163,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:51.994337Z"
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:45:51.994577+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.163,
      "prev_signal_strength": 0.163,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:51.994337Z",
      "event_schema_version": 1
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:45:52.020597+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.36,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.020448Z"
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:45:52.020808+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.36,
      "prev_signal_strength": 0.36,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.020448Z",
      "event_schema_version": 1
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:45:52.048819+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.267,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.048673Z"
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:52.048987+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.267,
      "prev_signal_strength": 0.267,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.048673Z",
      "event_schema_version": 1
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:52.072170+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.759,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.072042Z"
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:45:52.072306+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.759,
      "prev_signal_strength": 0.759,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.072042Z",
      "event_schema_version": 1
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:45:52.095223+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.902,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.095111Z"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:45:52.095481+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.902,
      "prev_signal_strength": 0.902,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.095111Z",
      "event_schema_version": 1
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:45:52.123641+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.914,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.123532Z"
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:45:52.123754+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.914,
      "prev_signal_strength": 0.914,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.123532Z",
      "event_schema_version": 1
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:45:52.155300+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.331,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.155152Z"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:45:52.155587+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.331,
      "prev_signal_strength": 0.331,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.155152Z",
      "event_schema_version": 1
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:45:52.182758+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.886,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.182591Z"
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:45:52.182914+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.886,
      "prev_signal_strength": 0.886,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.182591Z",
      "event_schema_version": 1
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:45:52.214798+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.914,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.214655Z"
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:45:52.214980+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.914,
      "prev_signal_strength": 0.914,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.214655Z",
      "event_schema_version": 1
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:45:52.250900+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.329,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.250755Z"
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:45:52.251053+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.329,
      "prev_signal_strength": 0.329,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.250755Z",
      "event_schema_version": 1
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:45:52.281353+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.341,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.281203Z"
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:45:52.281500+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.341,
      "prev_signal_strength": 0.341,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.281203Z",
      "event_schema_version": 1
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:45:52.308848+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.166,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.308713Z"
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:45:52.309040+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.166,
      "prev_signal_strength": 0.166,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.308713Z",
      "event_schema_version": 1
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:45:52.339659+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.165,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.339534Z"
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:45:52.339819+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "LONG",
      "signal_strength": 0.165,
      "prev_signal_strength": 0.165,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.339534Z",
      "event_schema_version": 1
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:45:52.373383+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.701,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.373215Z"
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:45:52.373566+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.701,
      "prev_signal_strength": 0.701,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.373215Z",
      "event_schema_version": 1
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:45:52.404038+00:00",
    "subsystem": "signals",
    "event_type": "signal_strength_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.15,
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.403946Z"
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:45:52.404147+00:00",
    "subsystem": "signals",
    "event_type": "signal_trend_evaluated",
    "severity": "INFO",
    "details": {
      "position_side": "SHORT",
      "signal_strength": 0.15,
      "prev_signal_strength": 0.15,
      "signal_delta": 0.0,
      "signal_trend": "flat",
      "evaluation_context": "open_position_refresh",
      "timestamp": "2026-02-13T01:45:52.403946Z",
      "event_schema_version": 1
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:45:52.440571+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "GM",
      "age_minutes": 383.3,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.09)+stale_alpha_cutoff(383min,-0.00%)"
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:52.473494+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "GOOGL",
      "age_minutes": 368.2,
      "pnl_pct": 0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.21)+flow_reversal+stale_alpha_cutoff(368min,0.01%)"
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:45:52.501990+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "NIO",
      "age_minutes": 363.6,
      "pnl_pct": 0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(364min,0.01%)"
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:45:52.531411+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "BA",
      "age_minutes": 351.9,
      "pnl_pct": 0.02,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.16)+flow_reversal+stale_alpha_cutoff(352min,0.02%)"
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:45:52.559459+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "XLK",
      "age_minutes": 351.8,
      "pnl_pct": -0.02,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.18)+stale_alpha_cutoff(352min,-0.02%)"
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:45:52.583888+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "COP",
      "age_minutes": 331.7,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.11)+flow_reversal+stale_alpha_cutoff(332min,0.00%)"
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:45:52.730761+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "META",
      "age_minutes": 322.6,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.11)+stale_alpha_cutoff(323min,-0.00%)"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:45:52.763641+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "MRNA",
      "age_minutes": 322.0,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.21)+flow_reversal+stale_alpha_cutoff(322min,0.00%)"
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:45:52.789092+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "XOM",
      "age_minutes": 320.0,
      "pnl_pct": -0.03,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.04)+flow_reversal+stale_alpha_cutoff(320min,-0.03%)"
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:45:52.949476+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "SLB",
      "age_minutes": 303.7,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.09)+stale_alpha_cutoff(304min,0.00%)"
    },
    "symbol": "SLB"
  },
  {
    "timestamp": "2026-02-13T01:45:53.126074+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "LCID",
      "age_minutes": 302.4,
      "pnl_pct": 0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.19)+stale_alpha_cutoff(302min,0.01%)"
    },
    "symbol": "LCID"
  },
  {
    "timestamp": "2026-02-13T01:45:53.311227+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "XLI",
      "age_minutes": 301.4,
      "pnl_pct": -0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.05)+flow_reversal+stale_alpha_cutoff(301min,-0.01%)"
    },
    "symbol": "XLI"
  },
  {
    "timestamp": "2026-02-13T01:45:53.471693+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "WFC",
      "age_minutes": 301.2,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.05)+flow_reversal+stale_alpha_cutoff(301min,0.00%)"
    },
    "symbol": "WFC"
  },
  {
    "timestamp": "2026-02-13T01:45:53.507678+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "C",
      "age_minutes": 295.6,
      "pnl_pct": -0.06,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.05)+drawdown(6.6%)+stale_alpha_cutoff(296min,-0.06%)"
    },
    "symbol": "C"
  },
  {
    "timestamp": "2026-02-13T01:45:53.543343+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "PFE",
      "age_minutes": 295.5,
      "pnl_pct": 0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.09)+flow_reversal+stale_alpha_cutoff(296min,0.01%)"
    },
    "symbol": "PFE"
  },
  {
    "timestamp": "2026-02-13T01:45:53.579946+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "INTC",
      "age_minutes": 286.9,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.19)+stale_alpha_cutoff(287min,0.00%)"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-13T01:45:53.580741+00:00",
    "subsystem": "exit",
    "event_type": "positions_to_close",
    "severity": "INFO",
    "details": {
      "symbols": [
        "GM",
        "GOOGL",
        "NIO",
        "BA",
        "XLK",
        "COP",
        "META",
        "MRNA",
        "XOM",
        "SLB",
        "LCID",
        "XLI",
        "WFC",
        "C",
        "PFE",
        "INTC"
      ],
      "count": 16
    }
  },
  {
    "timestamp": "2026-02-13T01:45:53.580928+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.09)+stale_alpha_cutoff(383min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:53.597370+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:54.111891+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:55.130027+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:55.130317+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 4, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:55.130551+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GM",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:55.131751+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "GM",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:57.147641+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:57.663141+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:58.679006+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:58.679196+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 4, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:45:58.679454+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GM",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:45:58.680189+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "GM",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:46:02.712739+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:03.239185+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:04.257622+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 4, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 4, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:04.257837+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 4, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:04.258130+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GM",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:46:04.259654+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GM",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:46:04.260027+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "GM",
      "attempts": 3
    },
    "symbol": "GM"
  },
  {
    "timestamp": "2026-02-13T01:46:04.260609+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.21)+flow_reversal+stale_alpha_cutoff(368min,0.01%)",
      "regime": "mixed"
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:04.276519+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:04.797700+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:05.813932+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:05.814161+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:05.814790+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GOOGL",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:05.815600+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "GOOGL",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:07.838069+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:08.361932+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:09.414684+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:09.414902+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:09.415134+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GOOGL",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:09.415360+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "GOOGL",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:13.444363+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:13.963336+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:14.981412+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:14.981701+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:14.981978+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GOOGL",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:14.985657+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "GOOGL",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:14.985910+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "GOOGL",
      "attempts": 3
    },
    "symbol": "GOOGL"
  },
  {
    "timestamp": "2026-02-13T01:46:14.986033+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(364min,0.01%)",
      "regime": "mixed"
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:15.008575+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:15.526987+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:15.797651+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 2283
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.020024+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.022125+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.023947+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-13T01:46:16.023852+00:00",
      "cycle_id": 2283,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 35,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 204,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.024234+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.026367+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 2283,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.555903+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.556138+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 72, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:16.560008+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "NIO",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:16.561696+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "NIO",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:17.847157+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-13T01:46:18.579232+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:19.108503+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:20.126126+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:20.127456+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 72, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:20.127688+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "NIO",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:20.129717+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "NIO",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:24.158193+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:24.678927+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:25.696850+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 72, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 72, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:25.697105+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 72, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:25.698388+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "NIO",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:25.700016+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "NIO",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:25.701469+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "NIO",
      "attempts": 3
    },
    "symbol": "NIO"
  },
  {
    "timestamp": "2026-02-13T01:46:25.702580+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.16)+flow_reversal+stale_alpha_cutoff(352min,0.02%)",
      "regime": "mixed"
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:25.721805+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:26.238212+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:27.259146+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:27.260527+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:27.260752+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "BA",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:27.262860+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "BA",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:29.287791+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:29.806487+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:30.822452+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:30.822939+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:30.823711+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "BA",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:30.824617+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "BA",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:34.845587+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:35.360872+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:36.380621+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:36.380813+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:36.381069+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "BA",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:36.384417+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "BA",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:36.384948+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "BA",
      "attempts": 3
    },
    "symbol": "BA"
  },
  {
    "timestamp": "2026-02-13T01:46:36.386759+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.18)+stale_alpha_cutoff(352min,-0.02%)",
      "regime": "mixed"
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:36.411181+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:36.926109+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:37.940365+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:37.940571+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:37.940763+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLK",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:37.941570+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XLK",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:39.956862+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:40.472604+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:41.487838+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:41.488065+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:41.488282+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLK",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:41.488509+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XLK",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:45.528184+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:46.043481+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:47.061648+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:47.061884+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:47.062190+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLK",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:47.062488+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XLK",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:47.062731+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "XLK",
      "attempts": 3
    },
    "symbol": "XLK"
  },
  {
    "timestamp": "2026-02-13T01:46:47.062882+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.11)+flow_reversal+stale_alpha_cutoff(332min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:47.085784+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:47.610710+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:48.625788+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:48.625954+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:48.626102+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:48.627149+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:50.733256+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:51.248534+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:52.263948+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:52.264223+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:52.264509+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:52.265821+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:56.282729+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:56.797390+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:57.814165+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:57.814406+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:57.814615+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:57.815281+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COP",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:57.815844+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "COP",
      "attempts": 3
    },
    "symbol": "COP"
  },
  {
    "timestamp": "2026-02-13T01:46:57.816358+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.11)+stale_alpha_cutoff(323min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:46:57.831969+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:58.347525+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:59.366393+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:59.366663+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:46:59.366864+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:46:59.367604+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:47:01.385983+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:01.901506+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:02.917101+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:02.917425+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:02.917688+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:47:02.918393+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:47:06.933772+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:07.448518+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:08.464859+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.304454725, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:08.465265+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.304454725, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:08.465475+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:47:08.466365+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:47:08.466580+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempts": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-13T01:47:08.466689+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.21)+flow_reversal+stale_alpha_cutoff(322min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:08.482458+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:09.005277+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:10.022953+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:10.023133+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:10.023339+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:10.024432+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:12.042512+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:12.557536+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:13.573424+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:13.573701+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:13.573903+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:13.575114+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:15.799387+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 2284
    }
  },
  {
    "timestamp": "2026-02-13T01:47:15.909797+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-13T01:47:15.910661+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:47:15.911399+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-13T01:47:15.911300+00:00",
      "cycle_id": 2284,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 35,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 204,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-13T01:47:15.911773+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-13T01:47:15.912541+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 2284,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-13T01:47:17.592132+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:18.111587+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:18.450565+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-13T01:47:19.127171+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 8, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 8, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:19.127402+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 8, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:19.127593+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:19.128271+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MRNA",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:19.128699+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "MRNA",
      "attempts": 3
    },
    "symbol": "MRNA"
  },
  {
    "timestamp": "2026-02-13T01:47:19.128834+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.04)+flow_reversal+stale_alpha_cutoff(320min,-0.03%)",
      "regime": "mixed"
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:47:19.144839+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:19.659978+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:20.675989+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:20.676228+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:20.676515+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XOM",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:47:20.677458+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XOM",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:47:22.697655+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:23.253890+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:24.273558+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:24.273804+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-13T01:47:24.274050+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "XOM",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "XOM"
  },
  {
    "timestamp": "2026-02-13T01:47:24.276077+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "XOM",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "XOM"
  }
]