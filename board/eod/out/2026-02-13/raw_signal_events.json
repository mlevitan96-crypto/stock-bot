[
  {
    "timestamp": "2026-02-14T00:45:41.379663+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "MA",
      "age_minutes": 336.2,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.07)+stale_alpha_cutoff(336min,-0.00%)"
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:41.544559+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "QQQ",
      "age_minutes": 336.2,
      "pnl_pct": -0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.09)+stale_alpha_cutoff(336min,-0.01%)"
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:41.711337+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "META",
      "age_minutes": 330.3,
      "pnl_pct": -0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.13)+stale_alpha_cutoff(330min,-0.01%)"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:45:41.744607+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "HOOD",
      "age_minutes": 269.4,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.26)+flow_reversal+stale_alpha_cutoff(269min,-0.00%)"
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:45:41.782942+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "SOFI",
      "age_minutes": 269.2,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.26)+flow_reversal+stale_alpha_cutoff(269min,-0.00%)"
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:45:41.957129+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "SPY",
      "age_minutes": 251.2,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.05)+stale_alpha_cutoff(251min,0.00%)"
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:45:41.993423+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "PLTR",
      "age_minutes": 234.4,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(234min,-0.00%)"
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:45:42.029453+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "INTC",
      "age_minutes": 232.6,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.24)+stale_alpha_cutoff(233min,0.00%)"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:45:42.065924+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "AMD",
      "age_minutes": 232.4,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.23)+flow_reversal+stale_alpha_cutoff(232min,0.00%)"
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:45:42.099927+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "TSLA",
      "age_minutes": 232.2,
      "pnl_pct": 0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.20)+stale_alpha_cutoff(232min,0.00%)"
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:45:42.174746+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:42.175039+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:42.175303+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:42.176460+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "QQQ",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:42.270261+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "TGT",
      "age_minutes": 227.0,
      "pnl_pct": -0.0,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.11)+stale_alpha_cutoff(227min,-0.00%)"
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:45:42.307688+00:00",
    "subsystem": "exit",
    "event_type": "stale_alpha_cutoff_exit",
    "severity": "WARN",
    "details": {
      "symbol": "COIN",
      "age_minutes": 225.7,
      "pnl_pct": -0.01,
      "required_pnl_pct": 0.2,
      "reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(226min,-0.01%)"
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:45:42.308351+00:00",
    "subsystem": "exit",
    "event_type": "positions_to_close",
    "severity": "INFO",
    "details": {
      "symbols": [
        "MA",
        "QQQ",
        "META",
        "HOOD",
        "SOFI",
        "SPY",
        "PLTR",
        "INTC",
        "AMD",
        "TSLA",
        "TGT",
        "COIN"
      ],
      "count": 12
    }
  },
  {
    "timestamp": "2026-02-14T00:45:42.308583+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.07)+stale_alpha_cutoff(336min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:42.324897+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:42.840639+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:43.856118+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:43.856495+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:43.856762+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MA",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:43.856953+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "MA",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:44.192226+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:44.706747+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:45.721434+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:45.721672+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:45.721943+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:45.722990+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "QQQ",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:45.874193+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:46.390512+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:47.406019+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:47.406300+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:47.406551+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MA",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:47.406790+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "MA",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:49.743150+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:50.260793+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:51.280523+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:51.280837+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:51.281130+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:51.282312+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:51.282561+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "QQQ",
      "attempts": 3
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:51.282698+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.13)+stale_alpha_cutoff(330min,-0.01%)",
      "regime": "mixed"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:45:51.299325+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:51.423893+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:51.814873+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:51.939928+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:52.831383+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:52.831628+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:52.831850+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:45:52.833035+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:45:52.955962+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.921155766, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:52.956262+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.921155766, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:52.956745+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MA",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:52.957005+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "MA",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:52.957202+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "MA",
      "attempts": 3
    },
    "symbol": "MA"
  },
  {
    "timestamp": "2026-02-14T00:45:52.957820+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.09)+stale_alpha_cutoff(336min,-0.01%)",
      "regime": "mixed"
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:52.974746+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:53.490142+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:54.506193+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:54.506408+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:54.506627+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:54.506959+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "QQQ",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:54.848099+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:55.363768+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:56.379969+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:56.380147+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:56.380319+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:45:56.381413+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:45:56.523172+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:57.039298+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:58.057915+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:58.058150+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:45:58.059489+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:45:58.059746+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "QQQ",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:46:00.397769+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:00.913777+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:01.930194+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:01.930419+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:01.930672+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:01.931928+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:01.932573+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempts": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:01.932959+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.26)+flow_reversal+stale_alpha_cutoff(269min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:01.949459+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:02.077137+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:02.465145+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:02.599959+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:03.035291+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-14T00:46:03.481078+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:03.481372+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:03.481638+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:03.482342+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "HOOD",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:03.616071+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.652073352, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:03.616529+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.652073352, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:03.616824+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:46:03.617026+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "QQQ",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:46:03.617535+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "QQQ",
      "attempts": 3
    },
    "symbol": "QQQ"
  },
  {
    "timestamp": "2026-02-14T00:46:03.618002+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.13)+stale_alpha_cutoff(330min,-0.01%)",
      "regime": "mixed"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:03.634058+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:04.150233+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:05.166215+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:05.166439+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:05.166629+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:05.166833+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:05.498576+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:06.015840+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:07.031928+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:07.032177+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:07.032587+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:07.032931+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "HOOD",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:07.182711+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:07.699066+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:08.714719+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:08.714940+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:08.715157+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:08.715370+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:11.049641+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:11.565579+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:12.580423+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:12.580639+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:12.580847+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:12.581067+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:12.582256+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "HOOD",
      "attempts": 3
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:12.582642+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.26)+flow_reversal+stale_alpha_cutoff(269min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:12.599074+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:12.730567+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:13.113802+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:13.246443+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:14.129436+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:14.129717+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 12, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:14.129966+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:14.130914+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SOFI",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:14.262274+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2.312316939, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:14.262466+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2.312316939, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:14.262763+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:14.263028+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "META",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:14.263294+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "META",
      "attempts": 3
    },
    "symbol": "META"
  },
  {
    "timestamp": "2026-02-14T00:46:14.263834+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.26)+flow_reversal+stale_alpha_cutoff(269min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:14.281298+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:14.797505+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:15.814129+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:15.814338+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:15.814650+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:15.814914+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "HOOD",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:16.146654+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:16.662616+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:17.678416+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:17.678629+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 12, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:17.678891+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:17.679814+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SOFI",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:17.830745+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:18.345739+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:18.933100+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 1026
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.031746+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.032607+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.033630+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-14T00:46:19.033501+00:00",
      "cycle_id": 1026,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 17,
      "wrote_exit_intent_count_this_cycle": 19,
      "wrote_shadow_decision_count_this_cycle": 196,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.033936+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.034553+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 1026,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.361476+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.361701+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:19.361921+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:19.362143+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "HOOD",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:21.694383+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:22.211073+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:23.228836+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:23.229048+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 12, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:23.230283+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:23.232586+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:23.232752+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "SOFI",
      "attempts": 3
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:23.232831+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.05)+stale_alpha_cutoff(251min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:23.260143+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:23.379468+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:23.776133+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:23.895341+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:24.792769+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:24.792983+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:24.793170+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:24.794311+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SPY",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:24.912445+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 3, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 3, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:24.913067+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 3, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:24.913477+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:24.913962+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "HOOD",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:24.914161+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "HOOD",
      "attempts": 3
    },
    "symbol": "HOOD"
  },
  {
    "timestamp": "2026-02-14T00:46:24.914933+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.26)+flow_reversal+stale_alpha_cutoff(269min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:24.933011+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:25.450728+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:26.467317+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:26.467534+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 12, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:26.467776+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:26.468031+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SOFI",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:26.811537+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:27.335161+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:28.396200+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:28.397232+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:28.397593+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:28.398464+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SPY",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:28.484957+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:29.012056+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:30.036869+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:30.037093+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 12, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:30.038007+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:30.039152+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SOFI",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:32.434083+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:32.956324+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:33.976485+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:33.976739+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:33.976965+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:33.978938+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:33.979088+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "SPY",
      "attempts": 3
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:33.979165+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(234min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:34.000221+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:34.058383+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:34.520489+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:34.576333+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:35.537058+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:35.537226+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:35.538489+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:35.540668+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "PLTR",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:35.593695+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 12, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 12, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:35.593855+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 12, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:35.594007+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:35.595503+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SOFI",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:35.597494+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "SOFI",
      "attempts": 3
    },
    "symbol": "SOFI"
  },
  {
    "timestamp": "2026-02-14T00:46:35.597611+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.05)+stale_alpha_cutoff(251min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:35.615094+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.135404+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.770979+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 3396
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.985284+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.986565+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.989423+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-14T00:46:36.987194+00:00",
      "cycle_id": 3396,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 9,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 208,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.989829+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-14T00:46:36.990688+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 3396,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:46:37.154431+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:37.154642+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:37.154839+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:37.155466+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SPY",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:37.570660+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:38.086078+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:39.105500+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:39.105794+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:39.106057+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:39.108655+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "PLTR",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:39.180449+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:39.698207+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:40.725654+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:40.725841+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:40.726062+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:40.726665+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "SPY",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:41.176701+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-14T00:46:43.126160+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:43.646370+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:44.090475+00:00",
    "subsystem": "signals",
    "event_type": "signal_correlation_snapshot",
    "severity": "INFO",
    "details": {
      "as_of": "2026-02-14T00:46:44.068978+00:00",
      "window_minutes": 1440.0,
      "pair_count_considered": 12,
      "pairs_topk": [
        {
          "a": "PLTR",
          "b": "QQQ",
          "corr": 1.4142,
          "n": 9
        },
        {
          "a": "QQQ",
          "b": "MA",
          "corr": 1.4142,
          "n": 9
        },
        {
          "a": "META",
          "b": "AMD",
          "corr": -1.0,
          "n": 9
        },
        {
          "a": "SPY",
          "b": "QQQ",
          "corr": 1.0,
          "n": 9
        },
        {
          "a": "AMD",
          "b": "TSLA",
          "corr": 1.0,
          "n": 9
        },
        {
          "a": "INTC",
          "b": "TSLA",
          "corr": -0.7071,
          "n": 9
        },
        {
          "a": "INTC",
          "b": "META",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "INTC",
          "b": "AMD",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "META",
          "b": "TSLA",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "SPY",
          "b": "PLTR",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "SPY",
          "b": "MA",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "PLTR",
          "b": "MA",
          "corr": 0.0,
          "n": 9
        }
      ],
      "concentration_summary": {
        "max_abs_corr": 1.4142,
        "avg_abs_corr": 0.544625
      },
      "event_schema_version": 1
    }
  },
  {
    "timestamp": "2026-02-14T00:46:44.666386+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:44.666730+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:44.666980+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:44.667344+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:44.667557+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "PLTR",
      "attempts": 3
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:44.667686+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.24)+stale_alpha_cutoff(232min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:44.693848+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:44.743193+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:45.211943+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:45.263374+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:46.227874+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:46.228058+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:46.229414+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:46.231579+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:46.283651+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1.469270428, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:46.283855+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1.469270428, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:46.284107+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:46.285589+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "SPY",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:46.286066+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "SPY",
      "attempts": 3
    },
    "symbol": "SPY"
  },
  {
    "timestamp": "2026-02-14T00:46:46.287407+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(234min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:46.308367+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:46.827372+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:47.844181+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:47.845550+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:47.845827+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:47.847557+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "PLTR",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:48.249178+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:48.767632+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:49.786370+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:49.786670+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:49.786869+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:49.789555+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:49.865124+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:50.391042+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:51.409470+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:51.409746+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:51.410033+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:51.411608+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "PLTR",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:53.806900+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:54.326308+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:54.346186+00:00",
    "subsystem": "signals",
    "event_type": "signal_correlation_snapshot",
    "severity": "INFO",
    "details": {
      "as_of": "2026-02-14T00:46:54.316090+00:00",
      "window_minutes": 1440.0,
      "pair_count_considered": 12,
      "pairs_topk": [
        {
          "a": "PLTR",
          "b": "QQQ",
          "corr": 1.4142,
          "n": 9
        },
        {
          "a": "QQQ",
          "b": "MA",
          "corr": 1.4142,
          "n": 9
        },
        {
          "a": "META",
          "b": "AMD",
          "corr": -1.0,
          "n": 9
        },
        {
          "a": "SPY",
          "b": "QQQ",
          "corr": 1.0,
          "n": 9
        },
        {
          "a": "AMD",
          "b": "TSLA",
          "corr": 1.0,
          "n": 9
        },
        {
          "a": "INTC",
          "b": "TSLA",
          "corr": -0.7071,
          "n": 9
        },
        {
          "a": "INTC",
          "b": "META",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "INTC",
          "b": "AMD",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "META",
          "b": "TSLA",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "SPY",
          "b": "PLTR",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "SPY",
          "b": "MA",
          "corr": 0.0,
          "n": 9
        },
        {
          "a": "PLTR",
          "b": "MA",
          "corr": 0.0,
          "n": 9
        }
      ],
      "concentration_summary": {
        "max_abs_corr": 1.4142,
        "avg_abs_corr": 0.544625
      },
      "event_schema_version": 1
    }
  },
  {
    "timestamp": "2026-02-14T00:46:55.344478+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:55.344685+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:55.344928+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:55.347071+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:55.348917+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempts": 3
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:55.350492+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.23)+flow_reversal+stale_alpha_cutoff(232min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:46:55.372518+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:55.429310+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:55.888874+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:55.945775+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:56.907191+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:56.908573+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:56.908785+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:46:56.911642+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "AMD",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:46:56.963029+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:56.964364+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:56.964731+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:56.966556+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "PLTR",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:56.967168+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "PLTR",
      "attempts": 3
    },
    "symbol": "PLTR"
  },
  {
    "timestamp": "2026-02-14T00:46:56.967355+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.24)+stale_alpha_cutoff(233min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:56.986849+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:57.505348+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:58.526830+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:58.527029+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:58.528476+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:58.531669+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:46:58.931918+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:46:59.451797+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:00.471029+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:00.471965+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:00.473107+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:00.474932+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "AMD",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:00.551041+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:01.071553+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:02.093578+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:02.093832+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:02.094075+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:47:02.095767+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:47:04.106786+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-14T00:47:04.493611+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:05.014396+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:06.031568+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:06.031799+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:06.032000+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:06.034441+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:06.035924+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "AMD",
      "attempts": 3
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:06.036928+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.20)+stale_alpha_cutoff(232min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:06.055255+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:06.115029+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:06.571345+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:06.635508+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:07.589956+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:07.590209+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:07.591689+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:07.593844+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TSLA",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:07.654876+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 5, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 5, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:07.655140+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 5, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:07.655413+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:47:07.657052+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "INTC",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:47:07.657925+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "INTC",
      "attempts": 3
    },
    "symbol": "INTC"
  },
  {
    "timestamp": "2026-02-14T00:47:07.658800+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.23)+flow_reversal+stale_alpha_cutoff(232min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:07.678822+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:08.196163+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:09.212962+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:09.213347+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:09.213788+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:09.214223+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "AMD",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:09.613933+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:10.128525+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:11.143330+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:11.143582+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:11.143818+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:11.144892+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TSLA",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:11.233228+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:11.750488+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:12.772575+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:12.772796+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:12.773518+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:12.774551+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "AMD",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:15.159778+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:15.675593+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:16.690917+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:16.691116+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:16.691353+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:16.692506+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:16.692849+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "TSLA",
      "attempts": 3
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:16.692984+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.11)+stale_alpha_cutoff(227min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:16.707705+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:16.791037+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:17.223469+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:17.305856+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.239129+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.239336+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 16, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.239525+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:18.240642+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TGT",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:18.322465+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.322718+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.322935+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:18.323152+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "AMD",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:18.323372+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "AMD",
      "attempts": 3
    },
    "symbol": "AMD"
  },
  {
    "timestamp": "2026-02-14T00:47:18.323494+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.20)+stale_alpha_cutoff(232min,0.00%)",
      "regime": "mixed"
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:18.341260+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.857262+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:18.934039+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 1027
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.048146+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.049028+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.049955+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-14T00:47:19.049832+00:00",
      "cycle_id": 1027,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 17,
      "wrote_exit_intent_count_this_cycle": 19,
      "wrote_shadow_decision_count_this_cycle": 196,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.050611+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.051193+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 1027,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.872973+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.873593+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:19.874939+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:19.875229+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TSLA",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:20.256214+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:20.775229+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:21.791137+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:21.791319+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 16, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:21.791555+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:21.792421+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TGT",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:21.891295+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:22.410454+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:23.426162+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:23.426421+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:23.426653+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:23.427329+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TSLA",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:25.807628+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:26.323262+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:27.339058+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:27.339361+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 16, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:27.339608+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:27.340616+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:27.341456+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "TGT",
      "attempts": 3
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:27.341879+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(226min,-0.01%)",
      "regime": "mixed"
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:27.357302+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:27.442487+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:27.872085+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:27.957090+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:28.887561+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:28.887714+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:28.887857+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:28.888807+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COIN",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:28.975232+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 1, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 1, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:28.976618+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 1, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:28.976857+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:28.977043+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TSLA",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:28.978547+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "TSLA",
      "attempts": 3
    },
    "symbol": "TSLA"
  },
  {
    "timestamp": "2026-02-14T00:47:28.979388+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.11)+stale_alpha_cutoff(227min,-0.00%)",
      "regime": "mixed"
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:28.997204+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:29.514285+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:30.530711+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:30.530942+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 16, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:30.532649+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:30.533362+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TGT",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:30.905887+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:31.420872+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:32.436710+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:32.436995+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:32.437212+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:32.437477+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COIN",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:32.547296+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:33.063309+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:34.080671+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:34.080831+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 16, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:34.080980+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:34.081128+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "TGT",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:36.452874+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.773118+00:00",
    "subsystem": "worker",
    "event_type": "iter_start",
    "severity": "INFO",
    "details": {
      "iter": 3397
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.906426+00:00",
    "subsystem": "worker",
    "event_type": "market_check",
    "severity": "INFO",
    "details": {
      "market_open": false,
      "simulate": false
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.906829+00:00",
    "subsystem": "run",
    "event_type": "complete",
    "severity": "INFO",
    "details": {
      "clusters": 0,
      "orders": 0,
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      },
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.909453+00:00",
    "subsystem": "phase2",
    "event_type": "phase2_heartbeat",
    "severity": "INFO",
    "details": {
      "ts": "2026-02-14T00:47:36.909300+00:00",
      "cycle_id": 3397,
      "telemetry_enabled": true,
      "shadow_enabled": true,
      "wrote_trade_intent_count_this_cycle": 9,
      "wrote_exit_intent_count_this_cycle": 0,
      "wrote_shadow_decision_count_this_cycle": 208,
      "symbol_risk_feature_count": 1,
      "high_vol_threshold": 0.0,
      "high_vol_symbol_count": 0
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.909738+00:00",
    "subsystem": "heartbeat",
    "event_type": "worker_alive",
    "severity": "INFO",
    "details": {
      "metrics": {
        "market_open": false,
        "clusters": 0,
        "orders": 0,
        "engine_status": "ok",
        "errors_this_cycle": []
      }
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.911305+00:00",
    "subsystem": "worker",
    "event_type": "iter_end",
    "severity": "INFO",
    "details": {
      "iter": 3397,
      "success": true,
      "market_open": false
    }
  },
  {
    "timestamp": "2026-02-14T00:47:36.972157+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:37.987512+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4037, in close_position_api_once\n    return self.api.close_position(symbol, cancel_orders=True)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/root/stock-bot/venv/lib/python3.12/site-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:37.987739+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:37.987972+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:37.989501+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:37.990430+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "COIN",
      "attempts": 3
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:38.097014+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:38.611099+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:39.627351+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 16, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 16, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:39.627575+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 16, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:39.627810+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:39.627994+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "TGT",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:39.628163+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "TGT",
      "attempts": 3
    },
    "symbol": "TGT"
  },
  {
    "timestamp": "2026-02-14T00:47:39.628444+00:00",
    "subsystem": "exit",
    "event_type": "exit_reason_recorded",
    "severity": "INFO",
    "details": {
      "exit_reason": "signal_decay(0.25)+flow_reversal+stale_alpha_cutoff(226min,-0.01%)",
      "regime": "mixed"
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:39.644750+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:40.164187+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:41.253322+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:41.253521+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:41.253674+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "error": "close_position_api_once returned None",
      "attempt": 1
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:41.254103+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COIN",
      "attempt": 1,
      "wait_sec": 2.0
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:41.654220+00:00",
    "subsystem": "cache_enrichment",
    "event_type": "cycle_complete",
    "severity": "INFO",
    "details": {}
  },
  {
    "timestamp": "2026-02-14T00:47:43.272479+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:43.788483+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:44.802988+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:44.803144+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:44.803321+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "error": "close_position_api_once returned None",
      "attempt": 2
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:44.803493+00:00",
    "subsystem": "exit",
    "event_type": "close_position_retry",
    "severity": "INFO",
    "details": {
      "symbol": "COIN",
      "attempt": 2,
      "wait_sec": 4.0
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:48.817521+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 1,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:49.338625+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "ERROR",
    "details": {
      "function": "close_position_api_once",
      "attempt": 2,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:50.353450+00:00",
    "subsystem": "exit",
    "event_type": "exception",
    "severity": "CRITICAL",
    "details": {
      "function": "close_position_api_once",
      "attempt": 3,
      "max_attempts": 3,
      "error": "insufficient qty available for order (requested: 2, available: 0)",
      "traceback": "Traceback (most recent call last):\n  File \"/root/stock-bot/utils/system_events.py\", line 166, in _wrapped\n    return fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/root/stock-bot/main.py\", line 4081, in close_position_api_once\n    return self.api.close_position(symbol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 528, in close_position\n    resp = self.delete('/positions/{}'.format(symbol), data=data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 266, in delete\n    return self._request('DELETE', path, data)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 222, in _request\n    return self._one_request(method, url, opts, retry)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 248, in _one_request\n    raise_api_error(resp, http_error)\n  File \"/usr/local/lib/python3.12/dist-packages/alpaca_trade_api/rest.py\", line 83, in raise_api_error\n    raise APIError(error, http_error) from None\nalpaca_trade_api.rest.APIError: insufficient qty available for order (requested: 2, available: 0)\n"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:50.353710+00:00",
    "subsystem": "exit",
    "event_type": "fallback_returned",
    "severity": "WARN",
    "details": {
      "function": "close_position_api_once",
      "error": "insufficient qty available for order (requested: 2, available: 0)"
    }
  },
  {
    "timestamp": "2026-02-14T00:47:50.353961+00:00",
    "subsystem": "exit",
    "event_type": "close_position_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "error": "close_position_api_once returned None",
      "attempt": 3
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:50.354171+00:00",
    "subsystem": "exit",
    "event_type": "close_position_all_attempts_failed",
    "severity": "ERROR",
    "details": {
      "symbol": "COIN",
      "attempts": 3,
      "error": "close_position_api_once returned None"
    },
    "symbol": "COIN"
  },
  {
    "timestamp": "2026-02-14T00:47:50.354641+00:00",
    "subsystem": "exit",
    "event_type": "close_position_not_verified",
    "severity": "INFO",
    "details": {
      "symbol": "COIN",
      "attempts": 3
    },
    "symbol": "COIN"
  }
]